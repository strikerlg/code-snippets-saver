/*! Textarea Line Count - v1.4.1 - 2012-12-06
* https://bitbucket.org/MostThingsWeb/textarea-line-count
* Copyright (c) 2012 MostThingsWeb (Chris Laplante); Licensed MIT */
(function(e){e.countLines=function(t,n){var r={recalculateCharWidth:!0,charsMode:"random",fontAttrs:["font-family","font-size","text-decoration","font-style","font-weight"]};n=e.extend({},r,n);var i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",s;t.jquery||(t=e(t));var o=t.val();switch(n.charsMode){case"random":n.chars="",i+=".,?!-+;:'\"";for(s=1;s<=12;s++)n.chars+=i[Math.floor(Math.random()*i.length)];break;case"alpha":n.chars=i;break;case"alpha_extended":n.chars=i+".,?!-+;:'\"";break;case"from_ta":if(o.length<15)n.chars=i;else for(s=1;s<=15;s++)n.chars+=o[Math.floor(Math.random()*o.length)];break;case"custom":}e.isArray(n.chars)||(n.chars=n.chars.split(""));var u="";for(s=1;s<=10;s++)u+=Math.floor(Math.random()*10)+1;t.after("<span id='s"+u+"'></span>");var a=e("#s"+u);a.hide(),e.each(n.fontAttrs,function(e,n){a.css(n,t.css(n))});var f=o.split("\n"),l=f.length,c;if(n.recalculateCharWidth||t.data("average_char")==null){var h=n.chars,p=h.length,d=0;e.each(h,function(e,t){a.text(t),d+=a.width()}),t.data("average_char",Math.ceil(d/p))}c=t.data("average_char"),a.remove();var v=(t.outerWidth()-t.width())*2,m,g=0,y=0,b=0;e.each(f,function(n,r){m=(r.length+1)*c+v;if(m>=t.outerWidth()){var i=Math.floor(m/t.outerWidth());y+=i,g++}e.trim(r)===""&&b++});var w={};return w.actual=l,w.wrapped=g,w.wraps=y,w.visual=l+y,w.blank=b,w}})(jQuery);